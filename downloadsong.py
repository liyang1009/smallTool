# -*- coding: gbk -*-
import json
import urllib
import re
from HTMLParser import HTMLParser
import urllib2
import traceback
import sys
strs='''
{
"data" : {
            "total"   :  307 ,
            "songList" : [ { id: 33887689 , ctime: 1357546897 }  ,   { id: 216535 , ctime: 1356852607 }  ,   { id: 249583 , ctime: 1356852607 }  ,   { id: 265722 , ctime: 1356852607 }  ,
            { id: 272288 , ctime: 1356852607 }  ,   { id: 272420 , ctime: 1356852607 }  ,   { id: 274594 , ctime: 1356852607 }  ,   { id: 304470 , ctime: 1356852607 }  ,
            { id: 348651 , ctime: 1356852607 }  ,   { id: 394875 , ctime: 1356852607 }  ,   { id: 490489 , ctime: 1356852607 }  ,   { id: 558343 , ctime: 1356852607 }  ,
            { id: 813267 , ctime: 1356852607 }  ,   { id: 813292 , ctime: 1356852607 }  ,   { id: 817750 , ctime: 1356852607 }  ,   { id: 986177 , ctime: 1356852607 }  ,
            { id: 1390797 , ctime: 1356852607 }  ,   { id: 2133610 , ctime: 1356852607 }  ,   { id: 5453562 , ctime: 1356852607 }  ,
            { id: 10736421 , ctime: 1356852607 }  ,   { id: 18415679 , ctime: 1356852607 }  ,   { id: 224129 , ctime: 1356852604 }  ,
            { id: 277207 , ctime: 1356852604 }  ,   { id: 277337 , ctime: 1356852604 }  ,   { id: 279572 , ctime: 1356852604 }  ,
            { id: 279984 , ctime: 1356852604 }  ,   { id: 649525 , ctime: 1356852604 }  ,   { id: 921326 , ctime: 1356852604 }  ,
            { id: 1146009 , ctime: 1356852604 }  ,   { id: 1392652 , ctime: 1356852604 }  ,   { id: 1498938 , ctime: 1356852604 }  ,
            { id: 2133499 , ctime: 1356852604 }  ,   { id: 12316375 , ctime: 1356852604 }  ,   { id: 15702101 , ctime: 1356852604 }  ,
            { id: 207102 , ctime: 1356852603 }  ,   { id: 222439 , ctime: 1356852603 }  ,   { id: 813188 , ctime: 1356852603 }  ,   { id: 882106 , ctime: 1356852603 }  ,
            { id: 3451496 , ctime: 1356852603 }  ,   { id: 5722606 , ctime: 1356852603 }  ,   { id: 8290464 , ctime: 1356852603 }  ,   { id: 217386 , ctime: 1356852600 }  ,
            { id: 230819 , ctime: 1356852600 }  ,   { id: 242020 , ctime: 1356852600 }  ,   { id: 813157 , ctime: 1356852600 }  ,   { id: 814293 , ctime: 1356852600 }  ,
            { id: 968925 , ctime: 1356852600 }  ,   { id: 1191811 , ctime: 1356852600 }  ,   { id: 1302451 , ctime: 1356852600 }  ,   { id: 3451500 , ctime: 1356852600 }  ,
            { id: 5453546 , ctime: 1356852600 }  ,   { id: 5453547 , ctime: 1356852600 }  ,   { id: 5453549 , ctime: 1356852600 }  ,   { id: 10525914 , ctime: 1356852600 }  ,
            { id: 11021266 , ctime: 1356852600 }  ,   { id: 11269835 , ctime: 1356852600 }  ,   { id: 12273596 , ctime: 1356852600 }  ,   { id: 12316338 , ctime: 1356852600 }  ,
            { id: 16553480 , ctime: 1356852600 }  ,   { id: 23744596 , ctime: 1356852600 }  ,   { id: 33350848 , ctime: 1356852600 }  ,   { id: 204421 , ctime: 1356852598 }  ,
            { id: 243167 , ctime: 1356852598 }  ,   { id: 271627 , ctime: 1356852598 }  ,   { id: 278398 , ctime: 1356852598 }  ,   { id: 305422 , ctime: 1356852598 }  ,
            { id: 883098 , ctime: 1356852598 }  ,   { id: 968967 , ctime: 1356852598 }  ,   { id: 1145948 , ctime: 1356852598 }  ,   { id: 1390825 , ctime: 1356852598 }  ,
            { id: 1392518 , ctime: 1356852598 }  ,   { id: 5897484 , ctime: 1356852598 }  ,   { id: 12316324 , ctime: 1356852598 }  ,   { id: 12316368 , ctime: 1356852598 }  ,
            { id: 213170 , ctime: 1356852597 }  ,   { id: 250442 , ctime: 1356852597 }  ,   { id: 314476 , ctime: 1356852597 }  ,   { id: 696700 , ctime: 1356852597 }  ,
            { id: 882045 , ctime: 1356852597 }  ,   { id: 882066 , ctime: 1356852597 }  ,   { id: 12316357 , ctime: 1356852597 }  ,   { id: 218579 , ctime: 1356852595 }  ,
            { id: 235590 , ctime: 1356852595 }  ,   { id: 236024 , ctime: 1356852595 }  ,   { id: 248720 , ctime: 1356852595 }  ,   { id: 256934 , ctime: 1356852595 }  ,
            { id: 260390 , ctime: 1356852595 }  ,   { id: 290466 , ctime: 1356852595 }  ,   { id: 299579 , ctime: 1356852595 }  ,   { id: 354877 , ctime: 1356852595 }  ,
            { id: 816462 , ctime: 1356852595 }  ,   { id: 844042 , ctime: 1356852595 }  ,   { id: 882005 , ctime: 1356852595 }  ,   { id: 920304 , ctime: 1356852595 }  ,
            { id: 968898 , ctime: 1356852595 }  ,   { id: 1008046 , ctime: 1356852595 }  ,   { id: 1430586 , ctime: 1356852595 }  ,   { id: 2133503 , ctime: 1356852595 }  ,
            { id: 3451511 , ctime: 1356852595 }  ,   { id: 5453553 , ctime: 1356852595 }  ,   { id: 10736444 , ctime: 1356852595 }  ,   { id: 219957 , ctime: 1356852592 }  ,
            { id: 245164 , ctime: 1356852592 }  ,   { id: 270195 , ctime: 1356852592 }  ,   { id: 270910 , ctime: 1356852592 }  ,   { id: 279943 , ctime: 1356852592 }  ,
            { id: 287834 , ctime: 1356852592 }  ,   { id: 305552 , ctime: 1356852592 }  ,   { id: 354668 , ctime: 1356852592 }  ,   { id: 696642 , ctime: 1356852592 }  ,
            { id: 813234 , ctime: 1356852592 }  ,   { id: 843109 , ctime: 1356852592 }  ,   { id: 920237 , ctime: 1356852592 }  ,   { id: 1071307 , ctime: 1356852592 }  ,
            { id: 2133560 , ctime: 1356852592 }  ,   { id: 3451513 , ctime: 1356852592 }  ,   { id: 3451532 , ctime: 1356852592 }  ,   { id: 10526013 , ctime: 1356852592 }  ,
            { id: 12273606 , ctime: 1356852592 }  ,   { id: 12316329 , ctime: 1356852592 }  ,   { id: 23416023 , ctime: 1356852592 }  ,   { id: 205792 , ctime: 1356852588 }  ,
            { id: 207870 , ctime: 1356852588 }  ,   { id: 228393 , ctime: 1356852588 }  ,   { id: 260166 , ctime: 1356852588 }  ,   { id: 274085 , ctime: 1356852588 }  ,
            { id: 697897 , ctime: 1356852588 }  ,   { id: 816477 , ctime: 1356852588 }  ,   { id: 843128 , ctime: 1356852588 }  ,   { id: 921373 , ctime: 1356852588 }  ,
            { id: 959158 , ctime: 1356852588 }  ,   { id: 1036660 , ctime: 1356852588 }  ,   { id: 1147070 , ctime: 1356852588 }  ,   { id: 1177268 , ctime: 1356852588 }  ,      
            { id: 1267673 , ctime: 1356852588 }  ,   { id: 1390840 , ctime: 1356852588 }  ,   { id: 1392708 , ctime: 1356852588 }  ,   { id: 1392919 , ctime: 1356852588 }  ,
            { id: 3451498 , ctime: 1356852588 }  ,   { id: 7280027 , ctime: 1356852588 }  ,   { id: 12273726 , ctime: 1356852588 }  ,   { id: 252832 , ctime: 1356852578 }  ,
            { id: 354330 , ctime: 1356852578 }  ,   { id: 354387 , ctime: 1356852578 }  ,   { id: 1009122 , ctime: 1356852578 }  ,   { id: 1191265 , ctime: 1356852578 }  ,
            { id: 1392586 , ctime: 1356852578 }  ,   { id: 1392875 , ctime: 1356852578 }  ,   { id: 1430563 , ctime: 1356852578 }  ,   { id: 31583990 , ctime: 1356852578 }  ,
            { id: 31891016 , ctime: 1356852578 }  ,   { id: 31891018 , ctime: 1356852578 }  ,   { id: 31891021 , ctime: 1356852578 }  ,   { id: 32932678 , ctime: 1356852578 }  ,
            { id: 32932794 , ctime: 1356852578 }  ,   { id: 32932901 , ctime: 1356852578 }  ,   { id: 32934154 , ctime: 1356852578 }  ,   { id: 32934252 , ctime: 1356852578 }  ,
            { id: 32934359 , ctime: 1356852578 }  ,   { id: 32934437 , ctime: 1356852578 }  ,   { id: 31496563 , ctime: 1355219040 }  ,   { id: 27851442 , ctime: 1354698799 }  ,
            { id: 30842166 , ctime: 1354698799 }  ,   { id: 12349155 , ctime: 1354698798 }  ,   { id: 1473023 , ctime: 1354008238 }  ,   { id: 1285116 , ctime: 1354000229 }  ,
            { id: 1461260 , ctime: 1354000229 }  ,   { id: 1615816 , ctime: 1354000229 }  ,   { id: 1615837 , ctime: 1354000229 }  ,   { id: 1615853 , ctime: 1354000229 }  ,
            { id: 1615898 , ctime: 1354000229 }  ,   { id: 2129009 , ctime: 1354000229 }  ,   { id: 2129010 , ctime: 1354000229 }  ,   { id: 7278090 , ctime: 1354000229 }  ,
            { id: 7282144 , ctime: 1354000229 }  ,   { id: 10525874 , ctime: 1354000229 }  ,   { id: 14950940 , ctime: 1354000229 }  ,   { id: 15407419 , ctime: 1354000229 }  ,
            { id: 16730792 , ctime: 1354000229 }  ,   { id: 16730893 , ctime: 1354000229 }  ,   { id: 16730917 , ctime: 1354000229 }  ,   { id: 16730999 , ctime: 1354000229 }  ,
            { id: 16731060 , ctime: 1354000229 }  ,   { id: 23160656 , ctime: 1354000229 }  ,   { id: 23220321 , ctime: 1354000229 }  ,   { id: 234165 , ctime: 1353988544 }  ,
            { id: 276544 , ctime: 1353988544 }  ,   { id: 313120 , ctime: 1353988544 }  ,   { id: 641045 , ctime: 1353988544 }  ,   { id: 1335210 , ctime: 1353988544 }  ,
            { id: 1335238 , ctime: 1353988544 }  ,   { id: 1337276 , ctime: 1353988544 }  ,   { id: 1337314 , ctime: 1353988544 }  ,   { id: 2058107 , ctime: 1353988544 }  ,
            { id: 2058109 , ctime: 1353988544 }  ,   { id: 2058115 , ctime: 1353988544 }  ,   { id: 2058117 , ctime: 1353988544 }  ,   { id: 2058121 , ctime: 1353988544 }  ,
            { id: 7589352 , ctime: 1353988544 }  ,
            { id: 8865077 , ctime: 1353988544 }  ]
        }

    }


'''
strss='''{
        "data" : {
            "total"   :  426 ,
            "songList" : [ { id: 266069 , ctime: 1357550129 }  ,   { id: 556113 , ctime: 1357550129 }  ,   { id: 718133 , ctime: 1357550129 }  ,
            { id: 1000860 , ctime: 1357550129 }  ,
            { id: 1102942 , ctime: 1357550129 }  ,
            { id: 1271193 , ctime: 1357550129 }  ,   { id: 2046555 , ctime: 1357550129 }  ,
            { id: 2047080 , ctime: 1357550129 }  ,   { id: 2047082 , ctime: 1357550129 }  ,   { id: 2095580 , ctime: 1357550129 }  ,
            { id: 7146785 , ctime: 1357550129 }  ,   { id: 7146944 , ctime: 1357550129 }  ,   { id: 7147124 , ctime: 1357550129 }  ,   { id: 7147596 , ctime: 1357550129 }  ,
            { id: 7148031 , ctime: 1357550129 }  ,   { id: 7148315 , ctime: 1357550129 }  ,   { id: 7148542 , ctime: 1357550129 }  ,   { id: 7148760 , ctime: 1357550129 }  ,
            { id: 7149024 , ctime: 1357550129 }  ,   { id: 7149173 , ctime: 1357550129 }  ,   { id: 7149313 , ctime: 1357550129 }  ,   { id: 7316462 , ctime: 1357550129 }  ,
            { id: 7316463 , ctime: 1357550129 }  ,   { id: 7316465 , ctime: 1357550129 }  ,   { id: 7319871 , ctime: 1357550129 }  ,   { id: 7321487 , ctime: 1357550129 }  ,
            { id: 7321493 , ctime: 1357550129 }  ,   { id: 7325695 , ctime: 1357550129 }  ,   { id: 10707473 , ctime: 1357550129 }  ,   { id: 10707474 , ctime: 1357550129 }  ,
            { id: 11779364 , ctime: 1357550129 }  ,   { id: 13757356 , ctime: 1357550129 }  ,   { id: 16576143 , ctime: 1357550129 }  ,   { id: 23472811 , ctime: 1357550129 }  ,
            { id: 30827868 , ctime: 1357550129 }  ,   { id: 31626898 , ctime: 1357550129 }  ,   { id: 31683273 , ctime: 1357550129 }  ,   { id: 31752106 , ctime: 1357550129 }  ,
            { id: 31894393 , ctime: 1357550129 }  ,   { id: 31913890 , ctime: 1357550129 }  ,   { id: 31925454 , ctime: 1357550129 }  ,   { id: 31925625 , ctime: 1357550129 }  ,
            { id: 31925944 , ctime: 1357550129 }  ,   { id: 31926134 , ctime: 1357550129 }  ,   { id: 31926402 , ctime: 1357550129 }  ,   { id: 31926517 , ctime: 1357550129 }  ,
            { id: 31926599 , ctime: 1357550129 }  ,   { id: 31926747 , ctime: 1357550129 }  ,   { id: 31926828 , ctime: 1357550129 }  ,   { id: 31926928 , ctime: 1357550129 }  ,
            { id: 31927002 , ctime: 1357550129 }  ,   { id: 31927213 , ctime: 1357550129 }  ,   { id: 31927442 , ctime: 1357550129 }  ,   { id: 31927746 , ctime: 1357550129 }  ,
            { id: 31927854 , ctime: 1357550129 }  ,   { id: 31927973 , ctime: 1357550129 }  ,   { id: 31928911 , ctime: 1357550129 }  ,   { id: 31929190 , ctime: 1357550129 }  ,
            { id: 31929214 , ctime: 1357550129 }  ,   { id: 31929235 , ctime: 1357550129 }  ,   { id: 31929249 , ctime: 1357550129 }  ,   { id: 31929260 , ctime: 1357550129 }  ,
            { id: 31929272 , ctime: 1357550129 }  ,   { id: 31929275 , ctime: 1357550129 }  ,   { id: 31929281 , ctime: 1357550129 }  ,   { id: 31929285 , ctime: 1357550129 }  ,
            { id: 31929289 , ctime: 1357550129 }  ,   { id: 31929291 , ctime: 1357550129 }  ,   { id: 31929293 , ctime: 1357550129 }  ,   { id: 31929297 , ctime: 1357550129 }  ,
            { id: 31929303 , ctime: 1357550129 }  ,   { id: 31929305 , ctime: 1357550129 }  ,   { id: 31929308 , ctime: 1357550129 }  ,   { id: 32196189 , ctime: 1357550129 }  ,
            { id: 32196348 , ctime: 1357550129 }  ,   { id: 32196511 , ctime: 1357550129 }  ,   { id: 32196655 , ctime: 1357550129 }  ,   { id: 32196808 , ctime: 1357550129 }  ,
            { id: 32196978 , ctime: 1357550129 }  ,   { id: 32197294 , ctime: 1357550129 }  ,   { id: 32197616 , ctime: 1357550129 }  ,   { id: 32197758 , ctime: 1357550129 }  ,
            { id: 32197965 , ctime: 1357550129 }  ,   { id: 32278209 , ctime: 1357550129 }  ,   { id: 32295494 , ctime: 1357550129 }  ,   { id: 32326660 , ctime: 1357550129 }  ,
            { id: 32328131 , ctime: 1357550129 }  ,   { id: 33343623 , ctime: 1357550129 }  ,   { id: 33343630 , ctime: 1357550129 }  ,   { id: 33343634 , ctime: 1357550129 }  ,
            { id: 33343642 , ctime: 1357550129 }  ,   { id: 33343646 , ctime: 1357550129 }  ,   { id: 33343652 , ctime: 1357550129 }  ,   { id: 33343661 , ctime: 1357550129 }  ,
            { id: 33343666 , ctime: 1357550129 }  ,   { id: 33343672 , ctime: 1357550129 }  ,   { id: 33343677 , ctime: 1357550129 }  ,   { id: 33351499 , ctime: 1357550129 }  ,
            { id: 33351594 , ctime: 1357550129 }  ,   { id: 33351835 , ctime: 1357550129 }  ,   { id: 33351945 , ctime: 1357550129 }  ,   { id: 33352376 , ctime: 1357550129 }  ,
            { id: 33352570 , ctime: 1357550129 }  ,   { id: 33352636 , ctime: 1357550129 }  ,   { id: 33352786 , ctime: 1357550129 }  ,   { id: 33356330 , ctime: 1357550129 }  ,
            { id: 33887660 , ctime: 1357550129 }  ,   { id: 33887663 , ctime: 1357550129 }  ,   { id: 33887666 , ctime: 1357550129 }  ,   { id: 33887669 , ctime: 1357550129 }  ,
            { id: 33887672 , ctime: 1357550129 }  ,   { id: 33887674 , ctime: 1357550129 }  ,   { id: 33887678 , ctime: 1357550129 }  ,   { id: 33887681 , ctime: 1357550129 }  ,
            { id: 33887683 , ctime: 1357550129 }  ,   { id: 33887686 , ctime: 1357550129 }  ,   { id: 33887691 , ctime: 1357550129 }  ,   { id: 33887694 , ctime: 1357550129 }  ,
            { id: 33887698 , ctime: 1357550129 }  ,   { id: 33887689 , ctime: 1357546897 }  ,   { id: 216535 , ctime: 1356852607 }  ,   { id: 249583 , ctime: 1356852607 }  ,
            { id: 265722 , ctime: 1356852607 }  ,   { id: 272288 , ctime: 1356852607 }  ,   { id: 272420 , ctime: 1356852607 }  ,   { id: 274594 , ctime: 1356852607 }  ,
            { id: 304470 , ctime: 1356852607 }  ,   { id: 348651 , ctime: 1356852607 }  ,   { id: 394875 , ctime: 1356852607 }  ,   { id: 490489 , ctime: 1356852607 }  ,
            { id: 558343 , ctime: 1356852607 }  ,   { id: 813267 , ctime: 1356852607 }  ,   { id: 813292 , ctime: 1356852607 }  ,   { id: 817750 , ctime: 1356852607 }  ,
            { id: 986177 , ctime: 1356852607 }  ,   { id: 1390797 , ctime: 1356852607 }  ,   { id: 2133610 , ctime: 1356852607 }  ,   { id: 5453562 , ctime: 1356852607 }  ,
            { id: 10736421 , ctime: 1356852607 }  ,   { id: 18415679 , ctime: 1356852607 }  ,   { id: 224129 , ctime: 1356852604 }  ,   { id: 277207 , ctime: 1356852604 }  ,
            { id: 277337 , ctime: 1356852604 }  ,   { id: 279572 , ctime: 1356852604 }  ,   { id: 279984 , ctime: 1356852604 }  ,   { id: 649525 , ctime: 1356852604 }  ,
            { id: 921326 , ctime: 1356852604 }  ,   { id: 1146009 , ctime: 1356852604 }  ,   { id: 1392652 , ctime: 1356852604 }  ,   { id: 1498938 , ctime: 1356852604 }  ,
            { id: 2133499 , ctime: 1356852604 }  ,   { id: 12316375 , ctime: 1356852604 }  ,   { id: 15702101 , ctime: 1356852604 }  ,   { id: 207102 , ctime: 1356852603 }  ,
            { id: 222439 , ctime: 1356852603 }  ,   { id: 813188 , ctime: 1356852603 }  ,   { id: 882106 , ctime: 1356852603 }  ,   { id: 3451496 , ctime: 1356852603 }  ,
            { id: 5722606 , ctime: 1356852603 }  ,   { id: 8290464 , ctime: 1356852603 }  ,   { id: 217386 , ctime: 1356852600 }  ,   { id: 230819 , ctime: 1356852600 }  ,
            { id: 242020 , ctime: 1356852600 }  ,   { id: 813157 , ctime: 1356852600 }  ,   { id: 814293 , ctime: 1356852600 }  ,   { id: 968925 , ctime: 1356852600 }  ,
            { id: 1191811 , ctime: 1356852600 }  ,   { id: 1302451 , ctime: 1356852600 }  ,   { id: 3451500 , ctime: 1356852600 }  ,   { id: 5453546 , ctime: 1356852600 }  ,
            { id: 5453547 , ctime: 1356852600 }  ,   { id: 5453549 , ctime: 1356852600 }  ,   { id: 10525914 , ctime: 1356852600 }  ,   { id: 11021266 , ctime: 1356852600 }  ,
            { id: 11269835 , ctime: 1356852600 }  ,   { id: 12273596 , ctime: 1356852600 }  ,   { id: 12316338 , ctime: 1356852600 }  ,   { id: 16553480 , ctime: 1356852600 }  ,
            { id: 23744596 , ctime: 1356852600 }  ,   { id: 33350848 , ctime: 1356852600 }  ,   { id: 204421 , ctime: 1356852598 }  ,   { id: 243167 , ctime: 1356852598 }  ,
            { id: 271627 , ctime: 1356852598 }  ,   { id: 278398 , ctime: 1356852598 }  ,   { id: 305422 , ctime: 1356852598 }  ,   { id: 883098 , ctime: 1356852598 }  ,
            { id: 968967 , ctime: 1356852598 }  ,   { id: 1145948 , ctime: 1356852598 }  ,   { id: 1390825 , ctime: 1356852598 }  ,   { id: 1392518 , ctime: 1356852598 }  ,
            { id: 5897484 , ctime: 1356852598 }  ,   { id: 12316324 , ctime: 1356852598 }  ,   { id: 12316368 , ctime: 1356852598 }  ,   { id: 213170 , ctime: 1356852597 }  ,
            { id: 250442 , ctime: 1356852597 }  ,   { id: 314476 , ctime: 1356852597 }  ,   { id: 696700 , ctime: 1356852597 }  ,   { id: 882045 , ctime: 1356852597 }  ,
            { id: 882066 , ctime: 1356852597 }  ,   { id: 12316357 , ctime: 1356852597 }  ]
        }
    }'''
strids="32924140,31249789,33794470,33794522,33794644,33794951,33794970,33794962,33794956,33794976,242343,209225,236989,1561243,7145740,246719,7340508,7144261,14850919,24944544,7340650,220457,7342856,290184,258145,1561255,240153,1296054,517155,292228,369585,1295984,7144448,205037,14850888,7338595,2070421,7339494,7144754,19062311,1295915,215983,1561345,211246,7145433,1561305,7339151,7338817,7145087,2103613"
def getids():

    try:
        j=0
        st=strss.replace("id",'"id"').replace("ctime",'"ctime"');
        data=json.loads(st)
        listsongid=[]
        #songs=data["data"]["songList"]
        songs=strids.split(",")
        print "一共%d歌曲" %(len(songs))
        if songs!=None:
            for i in songs:
                j=j+1
                if isinstance(i,str):
                    getdowloadurl(i,j)
                else:
                    getdowloadurl(i["id"],j)
              return
    except Exception as li:
        print li
           
    return listsongid
       

p=re.compile("\s+<a\shref=\"(.+\s)\"(\s+?)")
def getdowloadurl(ids,j):
   
    try:
       
        pp=str.format("http://music.baidu.com/song/{0}/download?title=&from=naga",ids)
        url=urllib.urlopen(pp)
        aa=url.readlines() 
        if aa!=None:
            for i in aa:          
                index1=i.find('" id="download"')      
                n=i.find("http://")
                if  index1!=-1:                  
                    geturl= i[n:index1]             
                    http=urllib2.urlopen(geturl,timeout=122)
                    b=http.read()
                    heads= http.info().headers
                    filename=str(j)+".mp3"
                    print heads
                    if heads:
                        headdict=returndict(heads)
                        filename=headdict["Content-Disposition"].split(";")[1].split("=")[1]
                       
                    print str.format("e:/music/{0}",filename)


                    filename=filename.replace('"',"").replace("\r\n","")
                    a=open(str.format("e:/music/{0}",filename),"wb")
                    a.write(b)            
                    a.close()
                    print "下载完成第%d首歌曲" %(j)
                   
            url.close()
    except Exception as e:
         print e
         exstr = traceback.format_exc()
         print exstr


def returndict(ss):
    a={}
    for i in ss:
        jj=i.split(":")
        if len(jj)>=2:
            a[jj[0]]=jj[1]
   
    if len(a)>0:
        print a
        return a
    else:
        return None
   



if __name__=="__main__":
    getids()
